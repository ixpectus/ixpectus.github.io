---
title: "Функции"
date: 2021-10-03T21:19:14+03:00
tags:
  - programming
  - functions
summary: "О функциях в языках программирования"
---
# Функции 

## Для чего нужны функции 
Основная причина создания функций - повышение уровня абстракции.  
Функции позволяют скрыть несущественные детали для того, чтобы можно было оперировать более крупными сущностями.  
В этом и есть суть абстракции, мы не обращаем внимание на детали реализации.  

**Создание избыточных уровней абстракции** самая частая ошибка программистов.  
Сейчас уже все знают, про то что нужно писать понятный код, делать говорящие названия функций и это очень часто приводит к тому, что выделяются слишком маленькие функции и в дальнейшем среди этого нагромождения абстракций сложно понять,  а что вообще происходит


## Характеристики функций
- Детерминированность - функция возвращает один и тот же результат при одних и тех же входных параметрах, например функция `Math.now` не является детерминированной, т.к. каждый раз возвращает разный результат.
  - Если функция хотя бы раз меняет свой результат при одних и тех же входных параметрах, то эта функция недетерминированная, например функция вычисления возраста по дате рождения недетерминированная
- Наличие побочных эффектов. 
  - Побочным эффектом называют 
    - любое взаимодействие с внешним миром - диском, сетью, и т.п. 
    - изменение глобальных переменных
  - Проблемы побочных эффектов
    - усложняют разработку
    - приводят к багам
  - Без побочных эффектов в программах не было бы смысла, т.к. результат нужно вывести хотя бы на экран


## Чистая функция 
Детерминированная функция без побочных эффектов

### Достоинства
- Легко тестировать
- Безопасно запускать повторно, что может быть полезно для конкурентных приложений

## CQS - Command Query Separation
Принцип,  созданный Бертраном Мейером, автором языка Eiffel.  
Все функции можно разделить на два типа
- команды  
  - выполняют какие-либо действия, почти всегда содержат в себе побочные эффекты
- запросы  
  - извлекают какие-либо данные, на самом деле не только извлекают, но могут и что-то вычислять
  - должны быть чистыми функциями, хотя не всегда это может быть возможно

## Функции высшего порядка 
Это функции, которые принимают на вход или возвращают другие функции.  
На примере javascript функции высшего порядка `map`, `filter`

### Полезные ссылки 
- https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/
